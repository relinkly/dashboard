<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KPI Dashboards Menu</title>
  <!-- Load Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700;900&display=swap" rel="stylesheet" />
  <style>
    /* Reset & Global */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f6f9f7 0%, #e9f0ea 100%);
      color: #2d2d2d;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 60px 24px 40px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    main {
      max-width: 900px;
      width: 100%;
      background: #fff;
      padding: 48px 40px 56px;
      border-radius: 12px; /* less rounded */
      box-shadow: 0 14px 40px rgba(21, 71, 52, 0.1);
    }

    header {
      text-align: center;
      margin-bottom: 50px;
    }

    h1 {
      font-weight: 900;
      font-size: 3.2rem;
      color: #154734;
      margin-bottom: 8px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      user-select: none;
      line-height: 1.05;
      text-shadow: 0 1px 3px rgba(21, 71, 52, 0.15);
      font-family: 'Inter', sans-serif;
    }

    nav.dashboards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 28px;
      margin-bottom: 60px;
    }

    nav.dashboards a {
      background-color: #fafafa;
      border-radius: 6px; /* rectangle with slight rounding */
      padding: 18px 22px;
      color: #154734;
      font-weight: 700;
      font-size: 1.3rem;
      text-align: center;
      text-decoration: none;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      user-select: none;
      cursor: pointer;
      box-shadow: 0 6px 15px rgba(21, 71, 52, 0.1);
      transition: background-color 0.35s ease, color 0.35s ease, box-shadow 0.45s ease, transform 0.2s ease;
      position: relative;
      border: 1px solid transparent;
      font-family: 'Inter', sans-serif;
    }

    nav.dashboards a svg {
      width: 22px;
      height: 22px;
      fill: #154734;
      margin-right: 16px;
      flex-shrink: 0;
    }

    nav.dashboards a:hover,
    nav.dashboards a:focus {
      background-color: #d6f5e3;
      color: #0b3d23;
      box-shadow: 0 14px 28px rgba(21, 71, 52, 0.18);
      transform: translateY(-3px);
      outline-offset: 4px;
      border-color: #0b3d23;
    }

    nav.dashboards a:focus-visible {
      outline: 3px solid #0b3d23;
      outline-offset: 6px;
    }

    /* Buttons */
    #openModalBtn {
      display: block;
      margin: 0 auto 60px;
      background: #bc3a6d;
      border: none;
      padding: 16px 48px;
      border-radius: 6px; /* rectangular shape */
      color: #fff;
      font-weight: 700;
      font-size: 1.25rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 8px 22px rgba(188, 58, 109, 0.38);
      transition: background 0.35s ease, box-shadow 0.35s ease, transform 0.2s ease;
      filter: drop-shadow(0 1.5px 1.5px rgba(0,0,0,0.12));
      font-family: 'Inter', sans-serif;
    }

    #openModalBtn:hover,
    #openModalBtn:focus {
      background: #9e2e5d;
      box-shadow: 0 16px 32px rgba(158, 46, 93, 0.55);
      transform: translateY(-3px);
      outline-offset: 4px;
    }

    #openModalBtn:focus-visible {
      outline: 3px solid #9e2e5d;
      outline-offset: 6px;
    }

    .logout-btn {
      display: block;
      margin: 0 auto;
      background: #154734;
      border: none;
      padding: 14px 48px;
      border-radius: 6px; /* rectangle */
      font-weight: 700;
      font-size: 1.1rem;
      color: #fff;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 8px 22px rgba(21, 71, 52, 0.38);
      transition: background 0.35s ease, box-shadow 0.35s ease, transform 0.2s ease;
      filter: drop-shadow(0 1.5px 1.5px rgba(0,0,0,0.12));
      font-family: 'Inter', sans-serif;
    }

    .logout-btn:hover,
    .logout-btn:focus {
      background: #0b3d23;
      box-shadow: 0 14px 36px rgba(11, 61, 35, 0.65);
      transform: translateY(-3px);
      outline-offset: 4px;
    }

    .logout-btn:focus-visible {
      outline: 3px solid #0b3d23;
      outline-offset: 6px;
    }

    /* ... rest of styles unchanged ... */

  </style>
</head>
<body>
<main>
  <header>
    <h1>KPI DASHBOARDS</h1>
  </header>

  <nav class="dashboards" aria-label="Dashboard navigation">
    <a href="dashboard1.html" tabindex="0" aria-label="ZL and BVS Report">
      <!-- Bar chart icon SVG -->
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <rect x="4" y="10" width="4" height="10" rx="1" ry="1"></rect>
        <rect x="10" y="6" width="4" height="14" rx="1" ry="1"></rect>
        <rect x="16" y="2" width="4" height="18" rx="1" ry="1"></rect>
      </svg>
      ZL & BVS Report
    </a>
    <a href="dashboard2.html" tabindex="0" aria-label="Gross Addition Performance">
      <!-- Line chart icon SVG -->
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" stroke="#154734" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="4 14 8 10 12 14 16 8 20 12"></polyline>
      </svg>
      Gross Addition Performance
    </a>
    <a href="dashboard3.html" tabindex="0" aria-label="Enablers">
      <!-- Settings gear icon SVG -->
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" stroke="#154734" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
      </svg>
      Enablers
    </a>
    <a href="dashboard4.html" tabindex="0" aria-label="BVS Performance">
      <!-- Performance icon: upward arrow -->
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" stroke="#154734" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="18 6 6 18 3 15"></polyline>
        <polyline points="15 6 18 6 18 9"></polyline>
      </svg>
      BVS Performance
    </a>
  </nav>

  <button id="openModalBtn" aria-haspopup="dialog" aria-controls="incidentModal" aria-expanded="false" type="button">
    Report Incident
  </button>

  <div class="modal-overlay" id="incidentModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
    <div class="modal">
      <button class="close-modal-btn" aria-label="Close incident report form">&times;</button>
      <h2 id="modalTitle">Incident Reporting</h2>
      <form id="incidentForm" novalidate>
        <label for="username">Username</label>
        <input type="text" id="username" name="username" readonly aria-readonly="true" />

        <label for="area">Area</label>
        <input type="text" id="area" name="area" placeholder="Enter area" required aria-required="true" />

        <label for="description">Description</label>
        <textarea id="description" name="description" rows="5" placeholder="Describe the incident" required aria-required="true"></textarea>

        <button type="submit">Submit Incident</button>
      </form>
    </div>
  </div>

  <button class="logout-btn" id="logoutBtn" aria-label="Log out" type="button">Logout</button>
</main>

<script>
  // Redirect if not authenticated
  if (localStorage.getItem("authenticated") !== "true") {
    window.location.href = "login.html";
  }

  // Populate username readonly input
  const usernameInput = document.getElementById("username");
  const loggedInUser = localStorage.getItem("username") || "";
  usernameInput.value = loggedInUser;

  // Modal logic
  const modal = document.getElementById("incidentModal");
  const openModalBtn = document.getElementById("openModalBtn");
  const closeModalBtn = modal.querySelector(".close-modal-btn");

  openModalBtn.addEventListener("click", () => {
    modal.classList.add("active");
    openModalBtn.setAttribute("aria-expanded", "true");
    modal.setAttribute("tabindex", "-1");
    modal.focus();
  });

  function closeModal() {
    modal.classList.remove("active");
    openModalBtn.setAttribute("aria-expanded", "false");
    openModalBtn.focus();
    clearForm();
  }

  closeModalBtn.addEventListener("click", closeModal);
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.classList.contains("active")) closeModal();
  });

  // Trap focus inside modal
  modal.addEventListener("keydown", (e) => {
    if (e.key === "Tab") {
      const focusable = modal.querySelectorAll("input, textarea, button");
      const first = focusable[0];
      const last = focusable[focusable.length - 1];

      if (e.shiftKey) {
        if (document.activeElement === first) {
          e.preventDefault();
          last.focus();
        }
      } else {
        if (document.activeElement === last) {
          e.preventDefault();
          first.focus();
        }
      }
    }
  });

  const googleFormURL = "https://docs.google.com/forms/d/e/1FAIpQLSdrmFNeQAUEjYGOYgHWOZCmEgtGknaXroWTD0keUro6DHocMg/formResponse";

  document.getElementById("incidentForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const area = this.area.value.trim();
    const description = this.description.value.trim();

    if (!area || !description) {
      alert("Please fill in all required fields.");
      return;
    }

    // Prepare form data matching Google Form field names or IDs
    const formData = new FormData();
    formData.append("entry.1111111111", loggedInUser);  // Replace with actual entry ID for username
    formData.append("entry.2222222222", area);          // Replace with actual entry ID for area
    formData.append("entry.3333333333", description);   // Replace with actual entry ID for description

    fetch(googleFormURL, {
      method: "POST",
      mode: "no-cors",
      body: formData
    }).then(() => {
      alert("Incident reported successfully.");
      closeModal();
    }).catch(() => {
      alert("There was an error submitting the form.");
    });
  });

  // Logout
  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("authenticated");
    localStorage.removeItem("username");
    window.location.href = "login.html";
  });

  function clearForm() {
    document.getElementById("incidentForm").reset();
    usernameInput.value = loggedInUser;
  }
</script>
</body>
</html>

